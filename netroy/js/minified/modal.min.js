(window.modal=function modal(){if($("div#mCont").length==0){$(document.body).append('<div id="mCont"><div class="overlay opac60"></div><div class="loader"></div><div class="info"></div><div class="dialog"><div class="title"></div><div class="content"></div></div></div>')}if($.browser.msie&&$.browser.version=="6.0"){$("div#mCont,div#mCont div.overlay,div#mCont div.loader,div#mCont div.dialog").css("position","absolute")}function a(){var c=$("div#mCont");$("div.overlay",c).css({height:$(document.body).height()+"px",width:$(document.body).width()+"px"});var b=$("div.loader",c);b.css("left",Math.floor(($(document.body).width()-b.outerWidth())/2));var e=$("div.info",c);e.css("left",Math.floor(($(document.body).width()-e.outerWidth())/2));var d=$("div.dialog",c);d.css("left",Math.floor(($(document.body).width()-d.outerWidth())/2));d.css("top",Math.floor(($(window).height()-d.outerHeight())/3))}$(window).resize(a);a();modal.loader={show:function(b){b=b||"loading";$("div#mCont div.loader").html(b);$("div#mCont div.overlay,div#mCont div.loader").show();return modal.loader},hide:function(){$("div#mCont div.overlay,div#mCont div.loader").hide()}};modal.info=function(b,c){if(typeof b!="string"){return}c=c||3000;$("div#mCont div.info").html(b).show().stop().delay(c).slideUp("fast")};modal.promote=function(c,d){if(typeof c!="string"){return}d=(typeof d=="function")?d:(new Function);$("div#mCont div.info").html(c).slideDown("slow");var b=jQuery("<div style='float: right; text-decoration : underline;'>close [x]</div>").click(function(){$("div#mCont div.info").slideUp("fast");d()});$("div#mCont div.info").append(b)};modal.prompt=function(d,c,f){d=d||"input text";c=c||"";f=(typeof f=="function")?f:(new Function);var b=$("div#mCont div.dialog");$("div.title",b).html(d);$("div.content",b).html("<div><textarea>"+c+"</textarea></div><span>char left : <b>"+(140-c.length)+"</b></span><button value='ok'>ok</button><button>cancel</button>");modal.loader.hide();$("div#mCont div.overlay,div#mCont div.dialog").show();var e=$("div.content textarea",b);e.focus().keyup(function(i){var h=$("div.content span b");var g=140-$(this).val().length;h.html(g);if(g>10){h.attr("style","")}else{if(g>=0){h.attr("style","color:#CB8D00;")}else{h.attr("style","color:#EB1500;")}}});$("div.content button",b).click(function(){if($(this).attr("value").toLowerCase()=="ok"){var g=e.val();if(g.length>140){modal.info("text too long");return}f.call(window,g)}$("div#mCont div.overlay,div#mCont div.dialog").hide()})};modal.confirm=function(c,d){c=c||"are you sure";d=(typeof d=="function")?d:(new Function);var b=$("div#mCont div.dialog");$("div.title",b).html("Retweet");$("div.content",b).html("<p>"+c+"</p><button value='ok'>yes</button><button>no</button>");$("div.content button",b).click(function(){if($(this).attr("value").toLowerCase()=="ok"){d.call(window)}$("div#mCont div.overlay,div#mCont div.dialog").hide()});modal.loader.hide();$("div#mCont div.overlay,div#mCont div.dialog").show()}})();