(function($){  

    // global variables    
    var $w = $(window);
    var imgToLoad = 1;
    var className = 'img-ondemand';
    // offset of bottom to load images, on px
    var offset = 300;


    function imgOndemand(){
        if (imgToLoad){
             //calc current scroll position
            var scrollPos = $w.height() +$w.scrollTop();
            
            // get imgs not loaded
            $('img.'+className).each(function(){
                var $img = $(this);
                // filter imgs over scroll limit             
                if($img.offset().top < scrollPos+offset){
                    $img.attr('src',$img.attr('longdesc')).removeClass(className);
                }
            });
            // flag on bottom
            imgToLoad = $('img.'+className).length;     
               
        }  

    }

    // load on start all imgs over scroll limit   
    $(function(){
        imgOndemand();          
    });

    //bind scroll event (if you need you can add window resize event)
    $w.scroll(function(){ 
        imgOndemand();
    });
          

})(jQuery);
