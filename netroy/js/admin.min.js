$(function initAdmin(){
  $("div#menu ul li a").click(function handleMenu(e){
    e.preventDefault();
    $("div#menu ul li a").removeClass("selected");
    $(this).addClass("selected");

    var url = $(this).attr("href");
    if(url.match(/portal/)){
      $.get(url,function handleContent(data){
        data = data.index;
        var bf = ["<table class='listing'><tr><th></th><th class='name'>Channel Name</th>"];
        bf.push("<th class='handle'>Twitter Handle</th><th class='subdomain'>Sub Domain</th>");
        bf.push("<th class='limit'>Limit</th><th class='actions'>Actions</th></tr>");
        for(var id in data.results){
          var portal = data.results[id];
          bf.push("<tr><td class='id'>");bf.push(portal.id);
          bf.push("</td><td class='name'>");bf.push(portal.name);
          bf.push("</td><td class='handle'>");bf.push(portal.handle);
          bf.push("</td><td class='subdomain'>");bf.push(portal.subdomain);
          bf.push("</td><td class='limit'>");bf.push(portal.limit);
          bf.push("</td><td> Edit Del");
          bf.push("</td></tr>");
        }
        bf.push("</table>");
        $("div#content").html(bf.join(''));
      },"json");
    }else{
      // Temporary till all options are implemented
    }
  });
});
